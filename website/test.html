<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
                    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<script src="http://code.jquery.com/jquery-latest.js"></script>
	<link rel="stylesheet" href="http://code.jquery.com/qunit/git/qunit.css" type="text/css" media="screen" />
	<script type="text/javascript" src="http://code.jquery.com/qunit/git/qunit.js"></script>
	<script src="ginkou.js" type="text/javascript"></script>

	<script>
	$(document).ready(function(){
	
		module("Server");
		
		test("Does it respond to ping?", 1, function() {
		  var server = new GINServer("127.0.0.1");
		  stop();
		  var pingData = {
				  "caller": "test.html"
				};
		  server.post("ping", pingData, 
				  function (data, textStatus) {
				  	ok(true, "Request succeded: " + JSON.stringify(data) + ". Status: " + textStatus);
				  	start();
				  },
				  function (data, textStatus) {
				  	ok(false, "Request failed: " + JSON.stringify(data) + ". Status: " + textStatus);
				  	start();
				  }
				);
		  
		});
		
		test("Do we get loginmodules?", 1, function() {
			  var server = new GINServer("127.0.0.1");
			  stop();
			  server.get("loginmodules", 
					  function (data, textStatus) {
					  	ok(true, "Request succeded: " + JSON.stringify(data) + ". Status: " + textStatus);
					  	start();
					  },
					  function (data, textStatus) {
					  	ok(false, "Request failed: " + JSON.stringify(data) + ". Status: " + textStatus);
					  	start();
					  }
					);
			  
			});
		
		test("Can we log in to dummymodule?", 1, function() {
			  var server = new GINServer("127.0.0.1");
			  stop();
			  var data = {
					  "module" = "dummybank.xml",
					  "key_0" = "dummyuser",
					  "key_1" = "dummypass"
			  }
			  server.post("loginmodules", data, 
					  function (data, textStatus) {
					  	ok(true, "Request succeded: " + JSON.stringify(data) + ". Status: " + textStatus);
					  	start();
					  },
					  function (data, textStatus) {
					  	ok(false, "Request failed: " + JSON.stringify(data) + ". Status: " + textStatus);
					  	start();
					  }
					);
			  
			});
		
/* 		test("second test within module", function() {
		  ok( true, "all pass" );
		});
		
		module("Module B");
		
		test("some other test", function() {
		  expect(2);
		  equal( true, false, "failing test" );
		  equal( true, true, "passing test" );
		}); */
		
	});
	</script>
  
</head>
<body>
	<h1 id="qunit-header">QUnit example</h1>
	<h2 id="qunit-banner"></h2>
	<div id="qunit-testrunner-toolbar"></div>
	<h2 id="qunit-userAgent"></h2>
	<ol id="qunit-tests"></ol>
	<div id="qunit-fixture">test markup, will be hidden</div>
</body>
</html>
